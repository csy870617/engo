<!DOCTYPE html>
<html lang="ko">
<head>
  <meta name="google-site-verification" content="HifdWX2uxLGAKhbFDjWkqorIkQ9NPCblF_yd9YiPujc" />
  <meta name="naver-site-verification" content="8f83181083159d00f1384546b63e290af99c59da" />
  <meta charset="UTF-8" />
  <title>ENGO - 영어회화 학습</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0f172a">
  
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <link rel="icon" type="image/png" href="./logo.png">
  <link rel="apple-touch-icon" href="./logo.png">
  
  <meta property="og:type" content="website">
  <meta property="og:title" content="English & Go">
  <meta property="og:description" content="영어회화 공부 ENGO와 함께해요.">
  <meta property="og:image" content="./logo.png">
  <meta property="og:site_name" content="ENGO">

  <link rel="stylesheet" href="style.css" />

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2078760660134095"
     crossorigin="anonymous"></script>
  
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.6.0/kakao.min.js"></script>
  
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script type="text/javascript">
    (function() {
      emailjs.init("5OwFBQpkoTkQKS3d0"); 
    })();
  </script>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
          .catch((err) => console.log('SW registration failed.', err));
      });
    }
  </script>

</head>

<body>
    <div id="loading-screen" style="position:fixed; top:0; left:0; width:100%; height:100%; background-color:#0f172a; z-index:9999; display:flex; justify-content:center; align-items:center;">
      <div class="loader-content">
        <img src="./logo.png" alt="ENGO" class="loader-logo" width="90" style="width:90px; height:90px; border-radius:24px;">
        
        <div class="loader-text">
          <span>E</span><span>N</span><span>G</span><span>O</span>
        </div>
      </div>
    </div>  

  <div class="bg-glow"></div>

<header>
  <div class="logo">ENGO</div>
  <div class="header-btns">
    <button class="text-btn" onclick="openSyncModal()">
      ☁ 학습내용 동기화
    </button>
    
    <button id="header-sync-btn" class="icon-btn" onclick="handleSmartSyncUI('header')" aria-label="동기화">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21.5 2v6h-6M2.5 22v-6h6M2 12c0-3.6 2-6.9 5.4-8.6 2.5-1.3 5.5-1.3 8.1.1L21.5 8M22 12c0 3.6-2 6.9-5.4 8.6-2.5 1.3-5.5 1.3-8.1-.1L2.5 16"/>
      </svg>
    </button>
    
    <button class="icon-btn" onclick="openSettingsModal()" aria-label="설정">
      ⚙️
    </button>
  </div>
</header>

<div id="sync-modal" class="modal hidden">
    <div class="modal-box">
      <h3 style="margin-bottom: 5px;">☁️ 학습내용 동기화</h3>
      
      <div id="sync-status" style="text-align:center; margin-bottom:20px; color:var(--text-sub); font-size:0.9rem; line-height: 1.5;">
        로그인이 필요합니다.
      </div>

      <div id="login-area" class="modal-btns horizontal" style="justify-content: center;">
        <button class="btn-sub" onclick="handleGoogleLogin()" style="width:100%; display:flex; align-items:center; justify-content:center; gap:8px; padding:12px;">
          <span style="font-size:1.2rem; font-weight:bold;">G</span> Google 계정으로 로그인
        </button>
      </div>

      <div id="logged-in-area" class="hidden" style="text-align:center;">
        <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:12px; margin-bottom:15px;">
          <p id="last-sync-time" style="color:#94a3b8; font-size:0.85rem;">동기화 기록 확인 중...</p>
          <p style="color:#64748b; font-size:0.75rem; margin-top:5px;">
            상단의 🔄 버튼을 누르면 즉시 동기화됩니다.
          </p>
        </div>
        
        <button onclick="handleLogout()" style="background:none; border:none; color:var(--text-sub); text-decoration:underline; cursor:pointer; font-size:0.85rem;">
          로그아웃
        </button>
      </div>

      <div style="text-align:right; margin-top:15px;">
        <button class="btn-text" onclick="closeSyncModal()">닫기</button>
      </div>
    </div>
  </div>

<main>
    <section id="page-home">
      <div class="hero-card">
        <h1>English & Go!</h1>
        <p>오늘의 영어 정복을 시작해볼까요?</p>
        
      </div>

      <div class="home-grid">
        <div class="home-tile tile-pattern" onclick="goTo('patterns')">
          <div class="tile-icon">📘</div>
          <div class="tile-content">
            <span class="label">패턴 학습</span>
            <span class="desc">핵심 표현 익히기</span>
          </div>
        </div>
        <div class="home-tile tile-word" onclick="goTo('words')">
          <div class="tile-icon">📙</div>
          <div class="tile-content">
            <span class="label">단어 학습</span>
            <span class="desc">우선순위 필수 단어 암기</span>
          </div>
        </div>
        <div class="home-tile tile-idiom" onclick="goTo('idioms')">
          <div class="tile-icon">📗</div>
          <div class="tile-content">
            <span class="label">숙어/구동사 학습</span>
            <span class="desc">관용구 마스터</span>
          </div>
        </div>
        <div class="home-tile tile-conv" onclick="goTo('conversations')">
          <div class="tile-icon">💬</div>
          <div class="tile-content">
            <span class="label">대화 학습</span>
            <span class="desc">실전 회화 연습</span>
          </div>
        </div>
        <div class="home-tile tile-speaking" onclick="goTo('shadowing-list')">
          <div class="tile-icon">🗣️</div>
          <div class="tile-content">
            <span class="label">쉐도잉 훈련</span>
            <span class="desc">영어 회화 따라하기</span>
          </div>
        </div>
        <div class="home-tile tile-puzzle" onclick="goTo('puzzle')">
          <div class="tile-icon">🧩</div>
          <div class="tile-content">
            <span class="label">문장 퍼즐</span>
            <span class="desc">어순 감각 키우기</span>
          </div>
        </div>

        <div class="home-tile tile-blog" onclick="goTo('blog-list')" style="grid-column: span 2;">
          <div class="tile-icon">📝</div>
          <div class="tile-content">
            <span class="label">한 장에 모아보기</span>
            <span class="desc">학습 노트 출력하기</span>
          </div>
        </div>
      </div>

      <div id="news-section" class="news-container">
        <div class="news-header">
          <h3>📰 Trending in Korea (Eng)</h3>
          <button onclick="refreshNews()" style="background:rgba(56, 189, 248, 0.15); border:1px solid rgba(56, 189, 248, 0.3); color:#38bdf8; border-radius:15px; padding:6px 12px; font-size:0.8rem; cursor:pointer; font-weight:600; transition:0.2s;">
            🔄 다른 뉴스 보기
          </button>
        </div>
        <div class="news-scroll-area" id="news-card-list"></div>
      </div>

      <div class="youtube-section">
        <h3>📺 반복해서 듣고 따라하기</h3>
        <div class="youtube-scroll-area">
          <div class="youtube-item">
            <div class="video-wrapper">
              <iframe src="https://www.youtube.com/embed/videoseries?list=PLzefhHvgKfYr1gVylL9tbKHaP8DUbu4UI" title="상황별 표현" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="video-title">상황별 가장 유용한 표현 200개</div>
          </div>
          <div class="youtube-item">
            <div class="video-wrapper">
              <iframe src="https://www.youtube.com/embed/videoseries?list=PLzefhHvgKfYqrn1nd05lFbZP46zx19JKa" title="유용한 패턴" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="video-title">가장 유용한 패턴 100개</div>
          </div>
          <div class="youtube-item">
            <div class="video-wrapper">
              <iframe src="https://www.youtube.com/embed/videoseries?list=PLzefhHvgKfYrkx6WiArVNg57ggV2GZHg3" title="기초 표현" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="video-title">기초 유용한 표현 200개</div>
          </div>
        </div>
      </div>
      
      <footer style="margin-top: 60px; padding: 20px; text-align: center; border-top: 1px solid rgba(255,255,255,0.1);">
        <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 10px;">
          <a href="archive.html" style="color: #94a3b8; font-size: 0.85rem; text-decoration: none;">전체 자료실 (Archive)</a>
          <a href="privacy.html" style="color: #94a3b8; font-size: 0.85rem; text-decoration: none;">개인정보처리방침</a>
        </div>
        <p style="color: #475569; font-size: 0.75rem;">© 2025 ENGO. All rights reserved.</p>
      </footer>

    </section>

    <section id="page-blog-list" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('home')">❮ 뒤로</span><h2>한 장에 모아보기</h2></div>
      
      <div class="filter-area scroll-x" style="justify-content: center;">
        <button class="chip-btn active" onclick="filterBlog('pattern', this)">패턴</button>
        <button class="chip-btn" onclick="filterBlog('idiom', this)">숙어/구동사</button>
        <button class="chip-btn" onclick="filterBlog('word', this)">단어장</button>
      </div>
      
      <div id="blog-list-container" class="list-view" style="margin-top:15px;"></div>
    </section>

    <section id="page-blog-detail" class="hidden">
      <div class="nav-header no-print"><span class="back-btn" onclick="goTo('blog-list')">❮ 목록으로</span></div>
      
      <div class="paper-container">
        <div id="paper-content">
          </div>
      </div>
      
      <div class="no-print" style="text-align:center; margin-top:20px; margin-bottom:40px;">
        <button class="btn-main" onclick="printPaperContent()" style="background: #334155; color: #fff;">🖨️ 자료 인쇄하기 (Print)</button>
      </div>
    </section>

    <section id="page-patterns" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('home')">❮ 뒤로</span><h2>패턴 학습</h2></div>
      <div class="card progress-card">
        <div class="progress-text" id="pattern-progress">0% 완료</div>
        <div class="progress-track"><div id="pattern-progress-bar" class="progress-fill"></div></div>
      </div>
      <div class="filter-area">
        <button id="pattern-studying-btn" class="chip-btn" onclick="togglePatternStudying()">암기 미완료만 보기</button>
        <input id="pattern-search" type="text" placeholder="검색..." class="search-input" oninput="renderPatternList()" />
      </div>
      <div id="pattern-list" class="list-view"></div>
    </section>

    <section id="page-pattern-detail" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('patterns')">❮ 목록</span></div>
      <div class="detail-card">
        <h1 id="pattern-title">Pattern</h1>
        <p id="pattern-desc">설명</p>
        <div class="check-row">
          <input type="checkbox" id="pattern-memorized-checkbox" onchange="togglePatternMemorizedDetail()" />
          <label for="pattern-memorized-checkbox">암기 완료 체크</label>
        </div>
      </div>
      <div class="content-area">
        <div class="control-bar">
          <button class="btn-small" onclick="playPatternExamples()">🔊 전체 듣기</button>
          <label class="toggle-label"><input type="checkbox" id="pattern-toggle-kr" checked onchange="renderPatternExamples()" /> 해석 보기</label>
        </div>
        <div id="pattern-examples" class="sentence-list"></div>
        <div class="nav-buttons">
          <button onclick="movePattern(-1)">이전</button>
          <button onclick="movePattern(1)">다음</button>
        </div>
      </div>
    </section>

    <section id="page-words" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('home')">❮ 뒤로</span><h2>단어장</h2></div>
      <div class="card progress-card">
        <div class="progress-text" id="word-progress">0%</div>
        <div class="progress-track"><div id="word-progress-bar" class="progress-fill"></div></div>
      </div>
      <div class="filter-area scroll-x">
        <button class="chip-btn active" data-word-level-btn="0" onclick="setWordLevel(0)">전체</button>
        <button class="chip-btn" data-word-level-btn="1" onclick="setWordLevel(1)">Lv.1</button>
        <button class="chip-btn" data-word-level-btn="2" onclick="setWordLevel(2)">Lv.2</button>
        <button class="chip-btn" data-word-level-btn="3" onclick="setWordLevel(3)">Lv.3</button>
        <button class="chip-btn" data-word-level-btn="4" onclick="setWordLevel(4)">Lv.4</button>
        <button class="chip-btn" data-word-level-btn="5" onclick="setWordLevel(5)">Lv.5</button>
        <button id="word-studying-btn" class="chip-btn outline" onclick="toggleWordStudying()">미암기만</button>
      </div>
      <input id="word-search" type="text" placeholder="단어 검색..." class="search-input mt-2" oninput="renderWordList()" />
      <div id="word-list" class="list-view"></div>
    </section>

    <section id="page-word-detail" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('words')">❮ 목록</span></div>
      <div class="detail-card">
        <h1 id="word-title">Word</h1>
        <p id="word-desc">뜻</p>
        <div class="check-row">
          <input type="checkbox" id="word-memorized-checkbox" onchange="toggleWordMemorizedDetail()" />
          <label for="word-memorized-checkbox">암기 완료</label>
        </div>
      </div>
      <div class="content-area">
        <div class="control-bar">
          <button class="btn-small" onclick="playWordExamples()">🔊 예문 듣기</button>
          <label class="toggle-label"><input type="checkbox" id="word-toggle-kr" checked onchange="renderWordExamples()" /> 해석</label>
        </div>
        <div id="word-examples" class="sentence-list"></div>
        <div class="nav-buttons">
          <button onclick="moveWord(-1)">이전</button>
          <button onclick="moveWord(1)">다음</button>
        </div>
      </div>
    </section>

    <section id="page-idioms" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('home')">❮ 뒤로</span><h2>숙어장</h2></div>
      <div class="card progress-card">
        <div class="progress-text" id="idiom-progress">0%</div>
        <div class="progress-track"><div id="idiom-progress-bar" class="progress-fill"></div></div>
      </div>
      <div class="filter-area scroll-x">
        <button class="chip-btn active" data-idiom-level-btn="0" onclick="setIdiomLevel(0)">전체</button>
        <button class="chip-btn" data-idiom-level-btn="1" onclick="setIdiomLevel(1)">Lv.1</button>
        <button class="chip-btn" data-idiom-level-btn="2" onclick="setIdiomLevel(2)">Lv.2</button>
        <button class="chip-btn" data-idiom-level-btn="3" onclick="setIdiomLevel(3)">Lv.3</button>
        <button class="chip-btn" data-idiom-level-btn="4" onclick="setIdiomLevel(4)">Lv.4</button>
        <button class="chip-btn" data-idiom-level-btn="5" onclick="setIdiomLevel(5)">Lv.5</button>
        <button id="idiom-studying-btn" class="chip-btn outline" onclick="toggleIdiomStudying()">미암기만</button>
      </div>
      <input id="idiom-search" type="text" placeholder="숙어 검색..." class="search-input mt-2" oninput="renderIdiomList()" />
      <div id="idiom-list" class="list-view"></div>
    </section>

    <section id="page-idiom-detail" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('idioms')">❮ 목록</span></div>
      <div class="detail-card">
        <h1 id="idiom-title">Idiom</h1>
        <p id="idiom-desc">뜻</p>
        <div class="check-row">
          <input type="checkbox" id="idiom-memorized-checkbox" onchange="toggleIdiomMemorizedDetail()" />
          <label for="idiom-memorized-checkbox">암기 완료</label>
        </div>
      </div>
      <div class="content-area">
        <div class="control-bar">
          <button class="btn-small" onclick="playIdiomExamples()">🔊 예문 듣기</button>
          <label class="toggle-label"><input type="checkbox" id="idiom-toggle-kr" checked onchange="renderIdiomExamples()" /> 해석</label>
        </div>
        <div id="idiom-examples" class="sentence-list"></div>
        <div class="nav-buttons">
          <button onclick="moveIdiom(-1)">이전</button>
          <button onclick="moveIdiom(1)">다음</button>
        </div>
      </div>
    </section>

    <section id="page-conversations" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('home')">❮ 뒤로</span><h2>실전 대화</h2></div>
      <input id="conv-search" type="text" placeholder="상황 검색 (예: 식당, 공항)..." class="search-input mb-4" oninput="renderConversationList()" />
      <div id="conv-list" class="list-view"></div>
    </section>

    <section id="page-conv-detail" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('conversations')">❮ 목록</span></div>
      <div class="detail-card">
        <h1 id="conv-title">Conversation</h1>
        <div class="action-row">
          <button class="btn-main" onclick="playConversationAll()">🔊 전체 듣기</button>
          <button class="btn-sub" onclick="startShadowingFromConv(currentConvId)">🗣️ 바로 쉐도잉</button>
        </div>
      </div>
      <div class="content-area">
        <div class="control-bar right">
          <label class="toggle-label"><input type="checkbox" id="conv-toggle-kr" checked onchange="renderConversationDetail()" /> 해석 보기</label>
        </div>
        <div id="conv-lines" class="chat-list"></div>
        <div class="nav-buttons">
          <button onclick="moveConv(-1)">이전 대화</button>
          <button onclick="moveConv(1)">다음 대화</button>
        </div>
      </div>
    </section>

    <section id="page-shadowing-list" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('home')">❮ 뒤로</span><h2>쉐도잉 목록</h2></div>
      <p class="subtext" style="margin-bottom: 15px; color:var(--text-sub);">연습하고 싶은 대화 주제를 선택하세요.</p>
      <input id="shadowing-search" type="text" placeholder="주제 검색..." class="search-input mb-4" oninput="renderShadowingList()" />
      <div id="shadowing-list-container" class="list-view"></div>
    </section>

    <section id="page-shadowing" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('shadowing-list')">❮ 목록</span></div>
      <div class="game-card">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
          <h2 style="margin:0;">🗣️ 쉐도잉</h2>
          <span id="shadowing-counter" style="font-size:0.9rem; color:var(--text-sub);">1 / 10</span>
        </div>

        <div class="shadowing-controls-row">
          <button id="btn-blind-mode" class="toggle-btn" onclick="toggleShadowingOption('blind')">🙈 블라인드 모드</button>
          <button id="btn-hide-kr" class="toggle-btn" onclick="toggleShadowingOption('hideKr')">🇰🇷 해석 숨김</button>
        </div>
        
        <div class="shadowing-display" onclick="revealTextTemp()" style="min-height: 140px; display:flex; flex-direction:column; justify-content:center; margin-bottom:20px; cursor:pointer;">
          <p id="shadowing-speaker" style="color:var(--accent); font-weight:bold; font-size:0.9rem; margin-bottom:12px;">Speaker A</p>
          
          <p id="shadowing-text" class="blind-text" style="font-size:1.4rem; font-weight:700; line-height:1.4; color:#fff; margin-bottom:12px;">
            Ready...
          </p>
          
          <p id="shadowing-kr" style="color:var(--text-sub); font-size:1rem;">준비...</p>
          
          <p id="shadowing-hint" style="font-size:0.8rem; color:rgba(255,255,255,0.4); margin-top:15px;">(문장을 터치하면 잠시 보입니다)</p>
        </div>

        <div style="text-align: center; margin-bottom: 25px;">
            <button id="shadowing-play-btn" onclick="playShadowingCurrent()" aria-label="다시 듣기" style="width: 80px; height: 80px; border-radius: 50%; padding:0; background: linear-gradient(135deg, #8b5cf6, #6366f1); border: 4px solid #fff; box-shadow: 0 10px 20px rgba(124, 58, 237, 0.3); display:inline-flex; align-items:center; justify-content:center; cursor:pointer; transition: transform 0.1s;">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11 5L6 9H2V15H6L11 19V5Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M15.54 8.46C16.4774 9.39764 17.004 10.6692 17.004 11.995C17.004 13.3208 16.4774 14.5924 15.54 15.53" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M19.07 4.93C20.9447 6.80527 21.9979 9.34836 21.9979 12C21.9979 14.6516 20.9447 17.1947 19.07 19.07" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <p class="subtext" style="margin-top: 10px; font-size:0.9rem;">다시 듣기 (반복)</p>
        </div>

        <div class="game-controls" style="display:flex; gap:10px;">
          <button class="btn-sub" onclick="prevShadowing()" style="flex:1;">❮ 이전</button>
          <button class="btn-sub" onclick="nextRandomShadowingTopic()" style="flex:1;">🎲 다음 주제</button>
          <button class="btn-main" onclick="nextShadowing()" style="flex:2;">다음 문장 ❯</button>
        </div>
      </div>
    </section>

<section id="page-puzzle" class="hidden">
      <div class="nav-header"><span class="back-btn" onclick="goTo('home')">❮ 나가기</span></div>
      
      <div class="game-card">
        <div class="game-header" style="justify-content:center; position:relative;">
          <h2>🧩 문장 퍼즐</h2>
        </div>
        
        <div class="filter-area" style="justify-content: center; margin-bottom: 15px;">
          <button class="chip-btn active" data-puzzle-level-btn="0" onclick="setPuzzleLevel(0)">전체</button>
          <button class="chip-btn" data-puzzle-level-btn="1" onclick="setPuzzleLevel(1)">Lv.1 (5-6단어)</button>
          <button class="chip-btn" data-puzzle-level-btn="2" onclick="setPuzzleLevel(2)">Lv.2 (7-8단어)</button>
          <button class="chip-btn" data-puzzle-level-btn="3" onclick="setPuzzleLevel(3)">Lv.3 (9단어+)</button>
        </div>
        
        <div style="text-align:center; margin-bottom:15px; color:var(--text-sub); font-size:0.9rem;">
          <span id="puzzle-counter">1 / 100</span>
        </div>

        <p class="puzzle-kr" id="puzzle-question" style="min-height:3rem;">문제가 나옵니다...</p>
        
        <div id="puzzle-target" class="puzzle-slot"></div>
        <div id="puzzle-bank" class="puzzle-pieces"></div>
        
        <div id="puzzle-feedback" class="feedback-msg"></div>
        
        <div class="game-bottom" style="margin-top:20px; display:flex; gap:10px;">
          <button class="btn-sub" onclick="resetPuzzle()" style="flex:1;">↺ 다시</button>
          <button class="btn-sub" onclick="showPuzzleAnswer()" style="flex:1;">👁️ 정답</button>
          <button class="btn-main" onclick="checkPuzzle()" style="flex:2;">확인</button>
        </div>
      </div>

      <div class="nav-buttons">
        <button onclick="movePuzzle(-1)">이전 문제</button>
        <button onclick="movePuzzle(1)">다음 문제</button>
      </div>
    </section>
        
  </main>

  <div id="install-banner" class="install-banner hidden">
    <div class="install-content">
      <span class="install-title">앱으로 설치하기</span>
      <span class="install-desc">홈 화면에 추가하여 더 편하게 공부하세요.</span>
    </div>
    <div style="display:flex; align-items:center; gap:10px;">
      <button id="btn-install" class="install-btn" onclick="installPWA()">설치</button>
      <button class="install-close" onclick="hideInstallBanner()">✕</button>
    </div>
  </div>

<div id="settings-modal" class="modal hidden">
    <div class="modal-box">
      <h3>설정</h3>
      
      <div class="setting-item" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <label for="tts-autoplay-toggle" style="color:#fff; cursor:pointer;">영어 문장 자동 재생</label>
        <input type="checkbox" id="tts-autoplay-toggle" style="width:20px; height:20px; accent-color:var(--primary); cursor:pointer;">
      </div>

      <div class="setting-group">
        <label class="setting-label" for="tts-voice-select">목소리 선택 (for Browser TTS)</label>
        <select id="tts-voice-select" class="dropdown" onchange="previewVoiceSettings()"><option>기본</option></select>
      </div>

      <div class="setting-group">
        <span class="setting-label">말하기 속도</span>
        <div class="btn-group" id="speed-btn-group">
          <button type="button" data-value="0.6" onclick="setTtsRate(0.6, this)">0.6x</button>
          <button type="button" data-value="0.8" onclick="setTtsRate(0.8, this)">0.8x</button>
          <button type="button" data-value="1"   onclick="setTtsRate(1.0, this)" class="active">1.0x</button>
          <button type="button" data-value="1.2" onclick="setTtsRate(1.2, this)">1.2x</button>
          <button type="button" data-value="1.5" onclick="setTtsRate(1.5, this)">1.5x</button>
        </div>
      </div>

      <div class="setting-group">
        <span class="setting-label">글자 크기</span>
        <div class="btn-group" id="font-btn-group">
          <button type="button" data-value="small"  onclick="setAppFontSize('small', this)">작게</button>
          <button type="button" data-value="medium" onclick="setAppFontSize('medium', this)" class="active">중간</button>
          <button type="button" data-value="large"  onclick="setAppFontSize('large', this)">크게</button>
        </div>
      </div>

      <div id="settings-install-area" class="setting-group settings-install-area">
        <div class="install-header">
          <span class="setting-label" style="margin:0;">앱 설치하기</span>
          <span class="install-badge">Recommended</span>
        </div>
        
        <p class="install-desc">
          앱으로 설치하면 인터넷 없이도 더 빠르고 편리하게 공부할 수 있습니다.
        </p>

        <button class="btn-install-gradient" onclick="installPWA()">
          <svg width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
          </svg>
          ENGO APP 다운로드
        </button>
      </div>

      <div class="setting-group" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
        <span class="setting-label">지원 및 피드백</span>
        <button class="btn-sub" onclick="openContactModal()" style="width:100%;">📧 개발자에게 문의하기</button>
      </div>

      <div class="modal-btns">
        <button class="btn-sub" onclick="closeSettingsModal()">취소</button>
        <button class="btn-main" onclick="saveSettings()">저장</button>
      </div>
      
      </div>
  </div>
  
  <div id="contact-modal" class="modal hidden">
    <div class="modal-box">
      <h3>문의하기</h3>
      <p style="color:var(--text-sub); font-size:0.9rem; margin-bottom:16px;">
        ENGO 관련 문의 사항이나 의견을 보내주세요.<br>
        <span style="font-size:0.8rem; opacity:0.8;">(답장이 필요하신 분은 메일 주소를 남겨주세요.)</span>
      </p>
      <textarea id="contact-msg" class="input-field" rows="5" placeholder="내용을 입력해주세요..." style="resize:none; height:120px; font-family:inherit;"></textarea>
      <div class="modal-btns">
        <button class="btn-sub" onclick="closeContactModal()">취소</button>
        <button class="btn-main" onclick="sendInquiry()">전송</button>
      </div>
    </div>
  </div>

  <div id="sync-modal" class="modal hidden">
    <div class="modal-box">
      <h3>클라우드 동기화</h3>
      <div id="sync-status" style="text-align:center; margin-bottom:20px; color:var(--text-sub); font-size:0.9rem;">
        로그인이 필요합니다.
      </div>
      <div class="modal-btns horizontal" style="display: flex; gap: 10px; justify-content: center; margin-bottom: 15px;">
        <button id="btn-login" class="btn-sub" onclick="handleGoogleLogin()" style="flex:1; display:flex; align-items:center; justify-content:center; gap:5px;">
          <span style="font-size:1.2rem;">G</span> 로그인
        </button>
        <button id="btn-sync" class="btn-main" onclick="handleSyncAction()" style="flex:1;">
          🔄 동기화
        </button>
      </div>
      <div id="logout-area" class="hidden" style="text-align:center; margin-top:10px;">
        <button onclick="handleLogout()" style="background:none; border:none; color:var(--text-sub); text-decoration:underline; cursor:pointer; font-size:0.85rem;">로그아웃</button>
      </div>
      <div style="text-align:right; margin-top:10px;">
        <button class="btn-text" onclick="closeSyncModal()">닫기</button>
      </div>
    </div>
  </div>

  <script src="pattern.js"></script>
  <script src="conversation.js"></script>
  <script src="idiom.js"></script>
  <script src="word.js"></script>

  <script src="js/core.js"></script>    <script src="js/storage.js"></script> <script src="js/media.js"></script>   <script src="js/study.js"></script>   <script src="js/game.js"></script>    </body>


</html>
